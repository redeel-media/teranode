<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2222px" preserveAspectRatio="none" style="width:867px;height:2222px;background:#F0F8FF;" version="1.1" viewBox="0 0 867 2222" width="867px" zoomAndPan="magnify"><defs/><g><rect fill="#F0F8FF" height="2222" style="stroke:none;stroke-width:1.0;" width="867" x="0" y="0"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="190" x="331.93" y="23.5352">Locked Flag State Machine</text><ellipse cx="595.86" cy="53.4883" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><path d="M524.36,140.4883 L667.36,140.4883 A12.5,12.5 0 0 1 679.86,152.9883 L679.86,166.9766 L511.86,166.9766 L511.86,152.9883 A12.5,12.5 0 0 1 524.36,140.4883 " fill="#DDDDDD" style="stroke:#DDDDDD;stroke-width:1.0;"/><rect fill="none" height="168.2422" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="168" x="511.86" y="140.4883"/><line style="stroke:#666666;stroke-width:0.5;" x1="511.86" x2="679.86" y1="166.9766" y2="166.9766"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="148" x="521.86" y="159.0234">TransactionReceived</text><ellipse cx="584.86" cy="187.9766" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><g id="TransactionReceived.Validating"><rect fill="#DDDDDD" height="64.7539" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="122" x="523.86" y="233.9766"/><line style="stroke:#666666;stroke-width:0.5;" x1="523.86" x2="645.86" y1="260.4648" y2="260.4648"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="74" x="547.86" y="252.5117">Validating</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="102" x="528.86" y="277.0664">Validator checks</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="101" x="528.86" y="291.1992">consensus rules</text></g><!--link *start*TransactionReceived to Validating--><g id="link_*start*TransactionReceived_Validating"><path d="M584.86,198.3366 C584.86,207.1766 584.86,214.9566 584.86,227.7166 " fill="none" id="*start*TransactionReceived-to-Validating" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="584.86,233.7166,588.86,224.7166,584.86,228.7166,580.86,224.7166,584.86,233.7166" style="stroke:#666666;stroke-width:1.0;"/></g><path d="M254.61,385.7283 L615.11,385.7283 A12.5,12.5 0 0 1 627.61,398.2283 L627.61,412.2166 L242.11,412.2166 L242.11,398.2283 A12.5,12.5 0 0 1 254.61,385.7283 " fill="#DDDDDD" style="stroke:#DDDDDD;stroke-width:1.0;"/><rect fill="none" height="127.375" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="385.5" x="242.11" y="385.7283"/><line style="stroke:#666666;stroke-width:0.5;" x1="242.11" x2="627.61" y1="412.2166" y2="412.2166"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="146" x="361.86" y="404.2634">UTXOCreatedLocked</text><g id="UTXOCreatedLocked.Created"><rect fill="#F08080" height="78.8867" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="132" x="254.11" y="424.2166"/><line style="stroke:#666666;stroke-width:0.5;" x1="254.11" x2="386.11" y1="450.7048" y2="450.7048"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="109" x="265.61" y="442.7517">UTXOs Created</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="84" x="259.11" y="467.3064">locked = true</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="103" x="259.11" y="481.4392">Cannot be spent</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="112" x="259.11" y="495.572">Phase 1 Complete</text></g><g id="elem_GMN11"><path d="M403.61,435.6966 L403.61,459.6666 L386.51,463.6666 L403.61,467.6666 L403.61,491.6282 A0,0 0 0 0 403.61,491.6282 L618.61,491.6282 A0,0 0 0 0 618.61,491.6282 L618.61,445.6966 L608.61,435.6966 L403.61,435.6966 A0,0 0 0 0 403.61,435.6966 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M608.61,435.6966 L608.61,445.6966 L618.61,445.6966 L608.61,435.6966 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="409.61" y="453.2649">Initial state after validation.</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="409.61" y="468.5755">Transaction exists but outputs</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="409.61" y="483.886">cannot be spent yet.</text></g><path d="M359.86,605.1083 L509.86,605.1083 A12.5,12.5 0 0 1 522.36,617.6083 L522.36,631.5966 L347.36,631.5966 L347.36,617.6083 A12.5,12.5 0 0 1 359.86,605.1083 " fill="#DDDDDD" style="stroke:#DDDDDD;stroke-width:1.0;"/><rect fill="none" height="127.375" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="175" x="347.36" y="605.1083"/><line style="stroke:#666666;stroke-width:0.5;" x1="347.36" x2="522.36" y1="631.5966" y2="631.5966"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="155" x="357.36" y="623.6434">BlockAssemblyStored</text><g id="BlockAssemblyStored.InBA"><rect fill="#FFFFE0" height="78.8867" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="153" x="359.36" y="643.5966"/><line style="stroke:#666666;stroke-width:0.5;" x1="359.36" x2="512.36" y1="670.0848" y2="670.0848"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="133" x="369.36" y="662.1317">In Block Assembly</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="111" x="364.36" y="686.6864">Transaction ready</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="66" x="364.36" y="700.8192">for mining</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="104" x="364.36" y="714.952">Still locked=true</text></g><path d="M245.86,905.7283 L403.86,905.7283 A12.5,12.5 0 0 1 416.36,918.2283 L416.36,932.2166 L233.36,932.2166 L233.36,918.2283 A12.5,12.5 0 0 1 245.86,905.7283 " fill="#DDDDDD" style="stroke:#DDDDDD;stroke-width:1.0;"/><rect fill="none" height="127.375" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="183" x="233.36" y="905.7283"/><line style="stroke:#666666;stroke-width:0.5;" x1="233.36" x2="416.36" y1="932.2166" y2="932.2166"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="112" x="268.86" y="924.2634">KafkaPublished</text><g id="KafkaPublished.Published"><rect fill="#FFFFE0" height="78.8867" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="162" x="245.36" y="944.2166"/><line style="stroke:#666666;stroke-width:0.5;" x1="245.36" x2="407.36" y1="970.7048" y2="970.7048"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="142" x="255.36" y="962.7517">Metadata Published</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="113" x="250.36" y="987.3064">Subtree validation</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="74" x="250.36" y="1001.4392">can proceed</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="104" x="250.36" y="1015.572">Still locked=true</text></g><g id="elem_Decision"><polygon fill="#F1F1F1" points="320.86,1234.6083,332.86,1246.6083,320.86,1258.6083,308.86,1246.6083,320.86,1234.6083" style="stroke:#181818;stroke-width:0.5;"/></g><path d="M232.86,1746.9583 L560.86,1746.9583 A12.5,12.5 0 0 1 573.36,1759.4583 L573.36,1773.4466 L220.36,1773.4466 L220.36,1759.4583 A12.5,12.5 0 0 1 232.86,1746.9583 " fill="#DDDDDD" style="stroke:#DDDDDD;stroke-width:1.0;"/><rect fill="none" height="127.375" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="353" x="220.36" y="1746.9583"/><line style="stroke:#666666;stroke-width:0.5;" x1="220.36" x2="573.36" y1="1773.4466" y2="1773.4466"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="107" x="343.36" y="1765.4934">UTXOUnlocked</text><g id="UTXOUnlocked.Unlocked"><rect fill="#90EE90" height="78.8867" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="140" x="232.36" y="1785.4466"/><line style="stroke:#666666;stroke-width:0.5;" x1="232.36" x2="372.36" y1="1811.9348" y2="1811.9348"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="120" x="242.36" y="1803.9817">UTXOs Unlocked</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="89" x="237.36" y="1828.5364">locked = false</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="64" x="237.36" y="1842.6692">Spendable</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="112" x="237.36" y="1856.802">Phase 2 Complete</text></g><g id="elem_GMN27"><path d="M390.36,1789.2766 L390.36,1820.8966 L372.77,1824.8966 L390.36,1828.8966 L390.36,1860.5187 A0,0 0 0 0 390.36,1860.5187 L564.36,1860.5187 A0,0 0 0 0 564.36,1860.5187 L564.36,1799.2766 L554.36,1789.2766 L390.36,1789.2766 A0,0 0 0 0 390.36,1789.2766 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M554.36,1789.2766 L554.36,1799.2766 L564.36,1799.2766 L554.36,1789.2766 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="396.36" y="1806.8449">Final state.</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="396.36" y="1822.1555">Transaction outputs can</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="396.36" y="1837.466">now be spent by other</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="396.36" y="1852.7766">transactions.</text></g><path d="M244.86,1350.6083 L396.86,1350.6083 A12.5,12.5 0 0 1 409.36,1363.1083 L409.36,1377.0966 L232.36,1377.0966 L232.36,1363.1083 A12.5,12.5 0 0 1 244.86,1350.6083 " fill="#DDDDDD" style="stroke:#DDDDDD;stroke-width:1.0;"/><rect fill="none" height="113.2422" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="177" x="232.36" y="1350.6083"/><line style="stroke:#666666;stroke-width:0.5;" x1="232.36" x2="409.36" y1="1377.0966" y2="1377.0966"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="117" x="262.36" y="1369.1434">WaitingForBlock</text><g id="WaitingForBlock.Waiting"><rect fill="#FFFFE0" height="64.7539" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="156" x="244.36" y="1389.0966"/><line style="stroke:#666666;stroke-width:0.5;" x1="244.36" x2="400.36" y1="1415.5848" y2="1415.5848"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="136" x="254.36" y="1407.6317">Waiting for Mining</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="84" x="249.36" y="1432.1864">locked = true</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="123" x="249.36" y="1446.3192">Fallback path active</text></g><path d="M242.36,1555.8483 L395.36,1555.8483 A12.5,12.5 0 0 1 407.86,1568.3483 L407.86,1582.3366 L229.86,1582.3366 L229.86,1568.3483 A12.5,12.5 0 0 1 242.36,1555.8483 " fill="#DDDDDD" style="stroke:#DDDDDD;stroke-width:1.0;"/><rect fill="none" height="99.1094" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="178" x="229.86" y="1555.8483"/><line style="stroke:#666666;stroke-width:0.5;" x1="229.86" x2="407.86" y1="1582.3366" y2="1582.3366"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="83" x="277.36" y="1574.3834">BlockMined</text><g id="BlockMined.Validated"><rect fill="#ADD8E6" height="50.6211" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="157" x="241.86" y="1594.3366"/><line style="stroke:#666666;stroke-width:0.5;" x1="241.86" x2="398.86" y1="1620.8248" y2="1620.8248"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="112" x="264.36" y="1612.8717">Block Validated</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="137" x="246.86" y="1637.4264">SetMinedMulti() called</text></g><path d="M392.36,1063.0983 L553.36,1063.0983 A12.5,12.5 0 0 1 565.86,1075.5983 L565.86,1089.5866 L379.86,1089.5866 L379.86,1075.5983 A12.5,12.5 0 0 1 392.36,1063.0983 " fill="#DDDDDD" style="stroke:#DDDDDD;stroke-width:1.0;"/><rect fill="none" height="141.5078" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="186" x="379.86" y="1063.0983"/><line style="stroke:#666666;stroke-width:0.5;" x1="379.86" x2="565.86" y1="1089.5866" y2="1089.5866"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91" x="427.36" y="1081.6334">ServiceCrash</text><g id="ServiceCrash.Restart"><rect fill="#F08080" height="93.0195" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="165" x="391.86" y="1101.5866"/><line style="stroke:#666666;stroke-width:0.5;" x1="391.86" x2="556.86" y1="1128.0748" y2="1128.0748"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="107" x="420.86" y="1120.1217">Service Restart</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="99" x="396.86" y="1144.6764">Block Assembly</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="56" x="396.86" y="1158.8092">restarted</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="145" x="396.86" y="1172.942">Transaction was stored</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="107" x="396.86" y="1187.0748">but not unlocked</text></g><path d="M675.36,392.7983 L838.36,392.7983 A12.5,12.5 0 0 1 850.86,405.2983 L850.86,419.2866 L662.86,419.2866 L662.86,405.2983 A12.5,12.5 0 0 1 675.36,392.7983 " fill="#DDDDDD" style="stroke:#DDDDDD;stroke-width:1.0;"/><rect fill="none" height="113.2422" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="188" x="662.86" y="392.7983"/><line style="stroke:#666666;stroke-width:0.5;" x1="662.86" x2="850.86" y1="419.2866" y2="419.2866"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="113" x="700.36" y="411.3334">CheckpointSync</text><g id="CheckpointSync.Checkpoint"><rect fill="#ADD8E6" height="64.7539" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="167" x="674.86" y="431.2866"/><line style="stroke:#666666;stroke-width:0.5;" x1="674.86" x2="841.86" y1="457.7748" y2="457.7748"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="142" x="687.36" y="449.8217">Checkpointed Block</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="147" x="679.86" y="474.3764">Block below checkpoint</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="128" x="679.86" y="488.5092">received during sync</text></g><path d="M688.36,762.4783 L825.36,762.4783 A12.5,12.5 0 0 1 837.86,774.9783 L837.86,788.9666 L675.86,788.9666 L675.86,774.9783 A12.5,12.5 0 0 1 688.36,762.4783 " fill="#DDDDDD" style="stroke:#DDDDDD;stroke-width:1.0;"/><rect fill="none" height="113.2422" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="162" x="675.86" y="762.4783"/><line style="stroke:#666666;stroke-width:0.5;" x1="675.86" x2="837.86" y1="788.9666" y2="788.9666"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="116" x="698.86" y="781.0134">QuickValidation</text><g id="QuickValidation.Quick"><rect fill="#ADD8E6" height="64.7539" rx="12.5" ry="12.5" style="stroke:#666666;stroke-width:0.5;" width="141" x="687.86" y="800.9666"/><line style="stroke:#666666;stroke-width:0.5;" x1="687.86" x2="828.86" y1="827.4548" y2="827.4548"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="121" x="697.86" y="819.5017">Quick Validation</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="111" x="692.86" y="844.0564">Parallel validation</text><text fill="#333333" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="119" x="692.86" y="858.1892">IgnoreLocked=true</text></g><ellipse cx="396.86" cy="1977.3383" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="396.86" cy="1977.3383" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1.0;"/><g id="elem_GMN48"><path d="M177.86,2049.3383 L177.86,2197.1332 A0,0 0 0 0 177.86,2197.1332 L615.86,2197.1332 A0,0 0 0 0 615.86,2197.1332 L615.86,2059.3383 L605.86,2049.3383 L400.86,2049.3383 L396.86,1988.6783 L392.86,2049.3383 L177.86,2049.3383 A0,0 0 0 0 177.86,2049.3383 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M605.86,2049.3383 L605.86,2059.3383 L615.86,2059.3383 L605.86,2049.3383 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="163" x="183.86" y="2066.9066">All Paths Lead to Unlock</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="183.86" y="2082.2172">&#160;</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="417" x="183.86" y="2097.5277">Path 1 (Primary): Normal operation - immediate unlock after Kafka</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="183.86" y="2112.8383">Path 2 (Fallback): Safety net - unlock when mined</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="416" x="183.86" y="2128.1488">Path 3 (Quick): Optimized - batch unlock for checkpointed blocks</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="365" x="183.86" y="2143.4594">Path 4 (Recovery): Service restart - unlock during recovery</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="183.86" y="2158.7699">&#160;</text><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="110" x="183.86" y="2174.0805">Design Principle</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="293.86" y="2174.0805">: Fail-safe</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="362" x="183.86" y="2189.391">Even if primary path fails, transactions eventually unlock.</text></g><!--link *start* to TransactionReceived--><g id="link_*start*_TransactionReceived"><path d="M595.86,63.5783 C595.86,78.4683 595.86,103.4883 595.86,134.2783 " fill="none" id="*start*-to-TransactionReceived" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="595.86,140.2783,599.86,131.2783,595.86,135.2783,591.86,131.2783,595.86,140.2783" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="596.86" y="107.0566">Transaction submitted</text></g><!--link TransactionReceived to UTXOCreatedLocked--><g id="link_TransactionReceived_UTXOCreatedLocked"><path d="M535.45,309.2083 C517.25,334.3983 501.1048,356.7556 484.0248,380.3856 " fill="none" id="TransactionReceived-to-UTXOCreatedLocked" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="480.51,385.2483,489.024,380.2974,483.439,381.196,482.5404,375.611,480.51,385.2483" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="511.54" y="352.2966">Validation successful</text></g><!--link UTXOCreatedLocked to BlockAssemblyStored--><g id="link_UTXOCreatedLocked_BlockAssemblyStored"><path d="M434.86,513.5883 C434.86,542.2883 434.86,570.1683 434.86,598.8483 " fill="none" id="UTXOCreatedLocked-to-BlockAssemblyStored" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="434.86,604.8483,438.86,595.8483,434.86,599.8483,430.86,595.8483,434.86,604.8483" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="435.86" y="564.1766">Store in Block Assembly</text></g><!--link BlockAssemblyStored to KafkaPublished--><g id="link_BlockAssemblyStored_KafkaPublished"><path d="M347.07,730.1283 C338.13,739.8883 330.34,750.7083 324.86,762.4783 C304.13,807.0583 304.8468,857.215 310.7168,899.595 " fill="none" id="BlockAssemblyStored-to-KafkaPublished" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="311.54,905.5383,314.2674,896.0746,310.854,900.5856,306.343,897.1722,311.54,905.5383" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="325.86" y="824.1666">Publish to Kafka</text></g><!--link KafkaPublished to Decision--><g id="link_KafkaPublished_Decision"><path d="M323.95,1033.5483 C322.97,1100.5083 321.5965,1195.1489 321.1165,1228.4589 " fill="none" id="KafkaPublished-to-Decision" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="321.03,1234.4583,325.1593,1225.5168,321.102,1229.4588,317.1601,1225.4016,321.03,1234.4583" style="stroke:#666666;stroke-width:1.0;"/></g><!--link Decision to UTXOUnlocked--><g id="link_Decision_UTXOUnlocked"><path d="M312.66,1250.9783 C262.91,1271.9183 6,1387.9383 67.86,1525.8483 C110.93,1621.8583 199.6968,1694.2734 276.1768,1743.2334 " fill="none" id="Decision-to-UTXOUnlocked" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="281.23,1746.4683,275.8067,1738.2471,277.019,1743.7725,271.4935,1744.9847,281.23,1746.4683" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="68.86" y="1514.9166">Path 1</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="111.86" y="1514.9166">: twoPhaseCommitTransaction()</text></g><!--link Decision to WaitingForBlock--><g id="link_Decision_WaitingForBlock"><path d="M320.86,1259.2683 C320.86,1278.2983 320.86,1311.2283 320.86,1344.2283 " fill="none" id="Decision-to-WaitingForBlock" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="320.86,1350.2283,324.86,1341.2283,320.86,1345.2283,316.86,1341.2283,320.86,1350.2283" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="87" x="324.86" y="1302.1766">Path 1 Failed</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="411.86" y="1302.1766">:</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="321.86" y="1317.4872">Wait for mining</text></g><!--link WaitingForBlock to BlockMined--><g id="link_WaitingForBlock_BlockMined"><path d="M320.29,1464.1783 C320,1492.9483 319.7128,1521.6786 319.4228,1549.3886 " fill="none" id="WaitingForBlock-to-BlockMined" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="319.36,1555.3883,323.454,1546.4306,319.4123,1550.3886,315.4544,1546.3469,319.36,1555.3883" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="332.98" y="1507.4166">Block containing</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="320.98" y="1522.7272">transaction is mined</text></g><!--link BlockMined to UTXOUnlocked--><g id="link_BlockMined_UTXOUnlocked"><path d="M306.96,1655.3983 C304.4,1675.1083 304.37,1697.6883 311.86,1716.9583 C315.9,1727.3383 318.1719,1732.4052 324.8819,1741.6352 " fill="none" id="BlockMined-to-UTXOUnlocked" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="328.41,1746.4883,326.3533,1736.8566,325.4699,1742.444,319.8825,1741.5607,328.41,1746.4883" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="325.86" y="1698.5266">Path 2</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="368.86" y="1698.5266">: Lua script</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="312.86" y="1713.8372">automatically unlocks</text></g><!--link BlockAssemblyStored to ServiceCrash--><g id="link_BlockAssemblyStored_ServiceCrash"><path d="M440.03,732.7283 C447.1,818.9083 459.2694,967.1684 466.6294,1056.8884 " fill="none" id="BlockAssemblyStored-to-ServiceCrash" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="467.12,1062.8683,470.3708,1053.5714,466.7112,1057.885,462.3976,1054.2254,467.12,1062.8683" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="458.43" y="816.6666">**Unclean</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="452.43" y="831.9772">shutdown**</text></g><!--link ServiceCrash to UTXOUnlocked--><g id="link_ServiceCrash_UTXOUnlocked"><path d="M476.47,1205.0283 C477.75,1235.3383 478.86,1271.2083 478.86,1303.6083 C478.86,1303.6083 478.86,1303.6083 478.86,1606.4083 C478.86,1656.4983 475.7,1670.5383 456.86,1716.9583 C452.83,1726.9083 450.7011,1731.7486 445.1311,1741.3486 " fill="none" id="ServiceCrash-to-UTXOUnlocked" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="442.12,1746.5383,450.0965,1740.7611,444.6293,1742.2135,443.1769,1736.7463,442.12,1746.5383" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="479.86" y="1404.7966">Path 4</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="522.86" y="1404.7966">: loadUnminedTransactions()</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="515.36" y="1420.1072">unlocks during recovery</text></g><!--link TransactionReceived to CheckpointSync--><g id="link_TransactionReceived_CheckpointSync"><path d="M656.27,309.2083 C676.35,336.9983 694.6861,362.3749 712.8861,387.5649 " fill="none" id="TransactionReceived-to-CheckpointSync" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="716.4,392.4283,714.3715,382.7906,713.4718,388.3754,707.8869,387.4757,716.4,392.4283" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="111" x="687" y="352.2966">Checkpoint path</text></g><!--link CheckpointSync to QuickValidation--><g id="link_CheckpointSync_QuickValidation"><path d="M756.86,506.2583 C756.86,575.4683 756.86,686.7283 756.86,756.0383 " fill="none" id="CheckpointSync-to-QuickValidation" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="756.86,762.0383,760.86,753.0383,756.86,757.0383,752.86,753.0383,756.86,762.0383" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="757.86" y="556.6766">Create UTXOs</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="762.36" y="571.9872">locked=true</text></g><!--link QuickValidation to UTXOUnlocked--><g id="link_QuickValidation_UTXOUnlocked"><path d="M756.86,876.0383 C756.86,938.6083 756.86,1042.9883 756.86,1132.8483 C756.86,1132.8483 756.86,1132.8483 756.86,1606.4083 C756.86,1699.3483 670.4814,1748.5258 579.4414,1776.1558 " fill="none" id="QuickValidation-to-UTXOUnlocked" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="573.7,1777.8983,583.4738,1779.1122,578.4845,1776.4462,581.1505,1771.457,573.7,1777.8983" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="766.36" y="1302.1766">Path 3</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="809.36" y="1302.1766">: Batch</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="757.86" y="1317.4872">SetLocked(false)</text></g><!--link UTXOUnlocked to *end*--><g id="link_UTXOUnlocked_*end*"><path d="M396.86,1874.3783 C396.86,1908.7383 396.86,1941.9383 396.86,1960.0983 " fill="none" id="UTXOUnlocked-to-*end*" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="396.86,1966.0983,400.86,1957.0983,396.86,1961.0983,392.86,1957.0983,396.86,1966.0983" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="397.86" y="1917.9066">Transaction outputs</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="411.36" y="1933.2172">spent or pruned</text></g><text fill="#333333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="154" x="0" y="2212.8012">Last Modified On: 9-Dev-2025</text><!--SRC=[VLTPR-Cs47xNhnXaKS0scaKtMHI5iHiWSUeYQBn9uqqFr7sWf95Dc2ODaehh5ltl7HwIATc9dgIvEFFDHParbrkcsGPoLgoNMjMod2YXDBoRVZVzOJhDJ2jHOiLgOQTAsYXowPz4X6cjTf7vlN-oX6iiimZ_PW0tIfUeku94xRjmwn_Yk3FdTYyGSYNAxByiizpIrxqgrbZ2LB0bpBtr6IjMN6AM_Jdw2yxFh-2hPjAmmd8bdx10_aBouvGAfiutt5eioLTluvIAyxen-IiJl6IMooKH3nzaDdwGxyKAYxLPo499WzBK1dGjq3ZNJvbtPf-__lumqKWUb36krc1mioZGcAeMZP_72ixBm3jpJ0EHVGQiVOTtztoveXHg9aYyeOv111kVmUeQEvm9ar9Po17C5gNjy4QZnnKp21zWeZPRWHP78n8WUGJj3W9LDU941xYJt78cef-iigZXfGtplPT9quD_SsCDv3LPgkssjiQB55sVO8_MwQ8i_TaEw6Dy7CmtBivhOt2JY_sSSkN3y2_0PM13ms-WFgMKW7tNr_E0tycRwuZs7oY4scKGQDtw8m_B_K9ML3KRBaDLHR6vvKB4n7psQQ6mJldY0lkPLMlsMEU2cvMFARw3LO7N1DCJJEAOeMMK1mOjrmToaEr5avushtEh4PDSKlKp2Lkj2lIvxqYVYYnwSOi5DmwPHyMbzHwqf4-VYfNY1LvTPLal3eT18vTbhKRJMizID5r5DSli2ZwCHcEmE-KBcAgNfa2Iby6mQ-CtnbsNJvKEgJwOWIdZ0akojf1E2f9K9gtQEd3KfGt7XzgA1Qn_8ambAIJkjurQCM6monkDvjGE9Sj5wCDkrBvJBzxgr4RUzzYKowPHZ_ioDgDhHC-JQdVendmFogvGUuuzQ9b-ZmOS-jWc24MMntJcCVKeDUHUGJRausbsu4oP46xRmTPbp_drubtfEz4E2phM0nZ8DD4jyuuiP18PSEDoVjWYYMeIJh0HnthCUFiLexaHtkC3cTe5hJSremNC1qC2NL35jTCW7FDwfL-uIh-l6PX2ywrTI5PRjQ4cTNRsK7i5qtW-H_r2BJRHZ8P7udkamnCIGOV6ZE-zfT9Gnxsnk90wS7o17QJIkjgHLUEdsaAweU-cVDrKvHlZh-ErY_nP5W8PJI6pgcsfTfBAlIFqEbuV7Lv2iV9P-fmc_fd1S24ZO53MsjMKnaAze6wtnSGj_wqRNlEzB5883nmwpaSILdDBxfP0Gc-Wp94gFLmlFCD16YyHqHj3Pxvrp-Xvvu9Epd5DGK3rX9pUBpKlric5P1pNkiUGhZhfC8z0z5KI93mhkTzu70An0q4WqJAZAoJLlEZibxkbfFpVTxT8_z3Nqtpfqdp3RB5QIEgmO6VWf-emN1zQ7MV4tV_6fsOWbPYVUZIYjhhsCy1FrLnPQZCAOZIwfctdpZHmJ-lUhUHWcg1scp7iaS6ZvXkczyCnV55wGxDNRL77A81lDbXo1rueltXt2gizshY0GJFUoCYSLMZt8D6IUbJQhL36GHLrBc7W8IE5Xwtb6_wFYvT-20YNHgjghhHDxUPXOaGJ7s7m57l07HldHEprmzb7xUAGkKN3bxJhYLNmhLjROxzGpmrvJn8_lf33l29aFJPXQbSaOBxjR1P04hHrCj3UP-scoGHMRYyhXzWzCnPcgkGLfqWUv1Y-SNDsS5QMvxFPx7nFpzam-ny0]--></g></svg>