<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1892px" preserveAspectRatio="none" style="width:891px;height:1892px;background:#F0F8FF;" version="1.1" viewBox="0 0 891 1892" width="891px" zoomAndPan="magnify"><defs/><g><rect fill="#F0F8FF" height="1892" style="stroke:none;stroke-width:1.0;" width="891" x="0" y="0"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="514" x="184.75" y="28.5352">Block Assembly Recovery: Unlocking Transactions After Service Restart</text><rect fill="#FFFFFF" height="124.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="168" y="179.5977"/><rect fill="#FFFFFF" height="849.582" style="stroke:#181818;stroke-width:1.0;" width="10" x="168" y="734.1191"/><rect fill="none" height="200.1738" style="stroke:#000000;stroke-width:1.5;" width="475" x="93.5" y="1031.2246"/><rect fill="none" height="110.2422" style="stroke:#000000;stroke-width:1.5;" width="455" x="103.5" y="1114.1563"/><rect fill="none" height="288.6816" style="stroke:#000000;stroke-width:1.5;" width="683" x="67" y="1245.3984"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="39" x2="39" y1="104.9766" y2="1809.8066"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="172.5" x2="172.5" y1="104.9766" y2="1809.8066"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="390" x2="390" y1="104.9766" y2="1809.8066"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="500" x2="500" y1="104.9766" y2="1809.8066"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="679.5" x2="679.5" y1="104.9766" y2="1809.8066"/><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="62" x="8" y="73.4883"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="15" y="94.0234">System</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="62" x="8" y="1808.8066"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="15" y="1829.3418">System</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="119" x="113.5" y="73.4883"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="120.5" y="94.0234">Block Assembly</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="119" x="113.5" y="1808.8066"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="120.5" y="1829.3418">Block Assembly</text><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="332" y="102.0234">Internal Storage</text><path d="M372,52.4883 C372,42.4883 390,42.4883 390,42.4883 C390,42.4883 408,42.4883 408,52.4883 L408,78.4883 C408,88.4883 390,88.4883 390,88.4883 C390,88.4883 372,88.4883 372,78.4883 L372,52.4883 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M372,52.4883 C372,62.4883 390,62.4883 390,62.4883 C390,62.4883 408,62.4883 408,52.4883 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="332" y="1822.3418">Internal Storage</text><path d="M372,1835.2949 C372,1825.2949 390,1825.2949 390,1825.2949 C390,1825.2949 408,1825.2949 408,1835.2949 L408,1861.2949 C408,1871.2949 390,1871.2949 390,1871.2949 C390,1871.2949 372,1871.2949 372,1861.2949 L372,1835.2949 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M372,1835.2949 C372,1845.2949 390,1845.2949 390,1845.2949 C390,1845.2949 408,1845.2949 408,1835.2949 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="458" y="102.0234">UTXO Store</text><path d="M482.5,52.4883 C482.5,42.4883 500.5,42.4883 500.5,42.4883 C500.5,42.4883 518.5,42.4883 518.5,52.4883 L518.5,78.4883 C518.5,88.4883 500.5,88.4883 500.5,88.4883 C500.5,88.4883 482.5,88.4883 482.5,78.4883 L482.5,52.4883 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M482.5,52.4883 C482.5,62.4883 500.5,62.4883 500.5,62.4883 C500.5,62.4883 518.5,62.4883 518.5,52.4883 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="458" y="1822.3418">UTXO Store</text><path d="M482.5,1835.2949 C482.5,1825.2949 500.5,1825.2949 500.5,1825.2949 C500.5,1825.2949 518.5,1825.2949 518.5,1835.2949 L518.5,1861.2949 C518.5,1871.2949 500.5,1871.2949 500.5,1871.2949 C500.5,1871.2949 482.5,1871.2949 482.5,1861.2949 L482.5,1835.2949 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M482.5,1835.2949 C482.5,1845.2949 500.5,1845.2949 500.5,1845.2949 C500.5,1845.2949 518.5,1845.2949 518.5,1835.2949 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="76" x="641.5" y="73.4883"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="648.5" y="94.0234">Validator</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="76" x="641.5" y="1808.8066"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="648.5" y="1829.3418">Validator</text><rect fill="#FFFFFF" height="124.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="168" y="179.5977"/><rect fill="#FFFFFF" height="849.582" style="stroke:#181818;stroke-width:1.0;" width="10" x="168" y="734.1191"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="884.5" x="0" y="135.6318"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="884.5" y1="135.6318" y2="135.6318"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="884.5" y1="138.6318" y2="138.6318"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="229" x="327.75" y="124.9766"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="211" x="333.75" y="141.5449">Normal Operation Before Crash</text><polygon fill="#666666" points="189,175.5977,179,179.5977,189,183.5977,185,179.5977" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="183" x2="678.5" y1="179.5977" y2="179.5977"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="195" y="174.8555">Store(transaction)</text><polygon fill="#666666" points="378,220.2188,388,224.2188,378,228.2188,382,224.2188" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="178" x2="384" y1="224.2188" y2="224.2188"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="185" y="204.166">Persist transaction</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="185" y="219.4766">(unmined)</text><path d="M395,237.2188 L395,277.2188 L556,277.2188 L556,247.2188 L546,237.2188 L395,237.2188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M546,237.2188 L546,247.2188 L556,247.2188 L546,237.2188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="401" y="254.7871">Transaction stored for</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="401" y="270.0977">future block assembly</text><polygon fill="#666666" points="667.5,300.1504,677.5,304.1504,667.5,308.1504,671.5,304.1504" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="173" x2="673.5" y1="304.1504" y2="304.1504"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="180" y="299.4082">Success</text><line style="stroke:#666666;stroke-width:1.0;" x1="679.5" x2="721.5" y1="333.4609" y2="333.4609"/><line style="stroke:#666666;stroke-width:1.0;" x1="721.5" x2="721.5" y1="333.4609" y2="346.4609"/><line style="stroke:#666666;stroke-width:1.0;" x1="680.5" x2="721.5" y1="346.4609" y2="346.4609"/><polygon fill="#666666" points="690.5,342.4609,680.5,346.4609,690.5,350.4609,686.5,346.4609" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="686.5" y="328.7188">twoPhaseCommitTransaction()</text><polygon fill="#666666" points="511.5,371.7715,501.5,375.7715,511.5,379.7715,507.5,375.7715" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="505.5" x2="678.5" y1="375.7715" y2="375.7715"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="517.5" y="371.0293">SetLocked(txHash, false)</text><path d="M505,388.7715 L505,443.7715 L677,443.7715 L677,398.7715 L667,388.7715 L505,388.7715 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M667,388.7715 L667,398.7715 L677,398.7715 L667,388.7715 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="83" x="511" y="406.3398">Normal Path</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="511" y="421.6504">Transaction unlocked</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="511" y="436.9609">after successful storage</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="884.5" x="0" y="470.3584"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="884.5" y1="470.3584" y2="470.3584"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="884.5" y1="473.3584" y2="473.3584"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="118" x="383.25" y="459.7031"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="100" x="389.25" y="476.2715">Crash Scenario</text><path d="M5,498.0137 L5,584.0137 L535,584.0137 L535,508.0137 L525,498.0137 L5,498.0137 " fill="#F08080" style="stroke:#181818;stroke-width:0.5;"/><path d="M525,498.0137 L525,508.0137 L535,508.0137 L525,498.0137 " fill="#F08080" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="57" x="108.5" y="515.582">Scenario</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="257" x="165.5" y="515.582">: Block Assembly service crashes BEFORE</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="303" x="108.5" y="530.8926">Validator can call twoPhaseCommitTransaction()</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="108.5" y="546.2031">&#160;</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="108.5" y="561.5137">Result: Transaction is stored in Block Assembly</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286" x="108.5" y="576.8242">but UTXOs remain locked=true in UTXO store</text><polygon fill="#666666" points="161,606.877,171,610.877,161,614.877,165,610.877" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="39" x2="167" y1="610.877" y2="610.877"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="46" y="606.1348">&#10060; Service crash</text><path d="M68,623.877 L68,663.877 L278,663.877 L278,633.877 L268,623.877 L68,623.877 " fill="#F08080" style="stroke:#181818;stroke-width:0.5;"/><path d="M268,623.877 L268,633.877 L278,633.877 L268,623.877 " fill="#F08080" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="74" y="641.4453">Service terminated</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="74" y="656.7559">Transaction stored but locked</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="884.5" x="0" y="690.1533"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="884.5" y1="690.1533" y2="690.1533"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="884.5" y1="693.1533" y2="693.1533"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="214" x="335.25" y="679.498"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="196" x="341.25" y="696.0664">Service Restart and Recovery</text><polygon fill="#666666" points="156,730.1191,166,734.1191,156,738.1191,160,734.1191" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="39" x2="162" y1="734.1191" y2="734.1191"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="46" y="729.377">&#128260; Service restart</text><line style="stroke:#666666;stroke-width:1.0;" x1="178" x2="220" y1="763.4297" y2="763.4297"/><line style="stroke:#666666;stroke-width:1.0;" x1="220" x2="220" y1="763.4297" y2="776.4297"/><line style="stroke:#666666;stroke-width:1.0;" x1="179" x2="220" y1="776.4297" y2="776.4297"/><polygon fill="#666666" points="189,772.4297,179,776.4297,189,780.4297,185,776.4297" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="185" y="758.6875">Initialize service</text><line style="stroke:#666666;stroke-width:1.0;" x1="178" x2="220" y1="805.7402" y2="805.7402"/><line style="stroke:#666666;stroke-width:1.0;" x1="220" x2="220" y1="805.7402" y2="818.7402"/><line style="stroke:#666666;stroke-width:1.0;" x1="179" x2="220" y1="818.7402" y2="818.7402"/><polygon fill="#666666" points="189,814.7402,179,818.7402,189,822.7402,185,818.7402" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="185" y="800.998">loadUnminedTransactions()</text><path d="M183,831.7402 L183,886.7402 L395,886.7402 L395,841.7402 L385,831.7402 L183,831.7402 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M385,831.7402 L385,841.7402 L395,841.7402 L385,831.7402 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="189" y="849.3086">Recovery function called</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="189" y="864.6191">during startup to reload</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="189" y="879.9297">previously stored transactions</text><polygon fill="#666666" points="378,925.293,388,929.293,378,933.293,382,929.293" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="178" x2="384" y1="929.293" y2="929.293"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="185" y="909.2402">Read all unmined</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="185" y="924.5508">transactions</text><polygon fill="#666666" points="189,954.6035,179,958.6035,189,962.6035,185,958.6035" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="183" x2="389" y1="958.6035" y2="958.6035"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="195" y="953.8613">List of transactions</text><line style="stroke:#666666;stroke-width:1.0;" x1="178" x2="220" y1="1003.2246" y2="1003.2246"/><line style="stroke:#666666;stroke-width:1.0;" x1="220" x2="220" y1="1003.2246" y2="1016.2246"/><line style="stroke:#666666;stroke-width:1.0;" x1="179" x2="220" y1="1016.2246" y2="1016.2246"/><polygon fill="#666666" points="189,1012.2246,179,1016.2246,189,1020.2246,185,1016.2246" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="185" y="983.1719">For each transaction:</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="185" y="998.4824">check if locked</text><path d="M93.5,1031.2246 L167.5,1031.2246 L167.5,1038.5352 L157.5,1048.5352 L93.5,1048.5352 L93.5,1031.2246 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="200.1738" style="stroke:#000000;stroke-width:1.5;" width="475" x="93.5" y="1031.2246"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="108.5" y="1044.793">loop</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="174" x="182.5" y="1043.8594">[For each unmined transaction]</text><polygon fill="#666666" points="488.5,1065.8457,498.5,1069.8457,488.5,1073.8457,492.5,1069.8457" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="178" x2="494.5" y1="1069.8457" y2="1069.8457"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="185" y="1065.1035">GetMetadata(txHash)</text><polygon fill="#666666" points="189,1095.1563,179,1099.1563,189,1103.1563,185,1099.1563" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="183" x2="499.5" y1="1099.1563" y2="1099.1563"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="195" y="1094.4141">Metadata (including locked flag)</text><path d="M103.5,1114.1563 L165.5,1114.1563 L165.5,1121.4668 L155.5,1131.4668 L103.5,1131.4668 L103.5,1114.1563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="110.2422" style="stroke:#000000;stroke-width:1.5;" width="455" x="103.5" y="1114.1563"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="118.5" y="1127.7246">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="106" x="180.5" y="1126.791">[if locked == true]</text><path d="M124,1136.4668 L124,1176.4668 L548,1176.4668 L548,1146.4668 L538,1136.4668 L124,1136.4668 " fill="#FFFFE0" style="stroke:#181818;stroke-width:0.5;"/><path d="M538,1136.4668 L538,1146.4668 L548,1146.4668 L538,1136.4668 " fill="#FFFFE0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="224.25" y="1154.0352">Found transaction that was stored</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="224.25" y="1169.3457">but not yet unlocked before crash</text><line style="stroke:#666666;stroke-width:1.0;" x1="178" x2="220" y1="1203.3984" y2="1203.3984"/><line style="stroke:#666666;stroke-width:1.0;" x1="220" x2="220" y1="1203.3984" y2="1216.3984"/><line style="stroke:#666666;stroke-width:1.0;" x1="179" x2="220" y1="1216.3984" y2="1216.3984"/><polygon fill="#666666" points="189,1212.3984,179,1216.3984,189,1220.3984,185,1216.3984" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="185" y="1198.6563">Add to lockedTransactions list</text><path d="M67,1245.3984 L129,1245.3984 L129,1252.709 L119,1262.709 L67,1262.709 L67,1245.3984 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="288.6816" style="stroke:#000000;stroke-width:1.5;" width="683" x="67" y="1245.3984"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="82" y="1258.9668">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="204" x="144" y="1258.0332">[if lockedTransactions is not empty]</text><polygon fill="#666666" points="488.5,1280.0195,498.5,1284.0195,488.5,1288.0195,492.5,1284.0195" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="178" x2="494.5" y1="1284.0195" y2="1284.0195"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="185" y="1279.2773">SetLocked(lockedTxHashes, false)</text><path d="M505,1297.0195 L505,1352.0195 L740,1352.0195 L740,1307.0195 L730,1297.0195 L505,1297.0195 " fill="#90EE90" style="stroke:#181818;stroke-width:0.5;"/><path d="M730,1297.0195 L730,1307.0195 L740,1307.0195 L730,1297.0195 " fill="#90EE90" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="96" x="511" y="1314.5879">Recovery Path</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="511" y="1329.8984">Batch unlock all transactions</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="511" y="1345.209">that were stored but not unlocked</text><polygon fill="#666666" points="189,1375.2617,179,1379.2617,189,1383.2617,185,1379.2617" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="183" x2="499.5" y1="1379.2617" y2="1379.2617"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="195" y="1374.5195">Success</text><path d="M77,1392.2617 L77,1447.2617 L268,1447.2617 L268,1402.2617 L258,1392.2617 L77,1392.2617 " fill="#90EE90" style="stroke:#181818;stroke-width:0.5;"/><path d="M258,1392.2617 L258,1402.2617 L268,1402.2617 L258,1392.2617 " fill="#90EE90" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="83" y="1409.8301">Recovery complete!</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="83" y="1425.1406">Transactions now available</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="83" y="1440.4512">for spending and mining</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="67" x2="750" y1="1454.1934" y2="1454.1934"/><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="148" x="72" y="1464.8281">[if no locked transactions]</text><path d="M96,1473.1484 L96,1528.1484 L249,1528.1484 L249,1483.1484 L239,1473.1484 L96,1473.1484 " fill="#D3D3D3" style="stroke:#181818;stroke-width:0.5;"/><path d="M239,1473.1484 L239,1483.1484 L249,1483.1484 L239,1473.1484 " fill="#D3D3D3" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="102" y="1490.7168">No recovery needed.</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="102" y="1506.0273">All transactions were</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="102" y="1521.3379">properly unlocked.</text><line style="stroke:#666666;stroke-width:1.0;" x1="178" x2="220" y1="1582.7012" y2="1582.7012"/><line style="stroke:#666666;stroke-width:1.0;" x1="220" x2="220" y1="1582.7012" y2="1595.7012"/><line style="stroke:#666666;stroke-width:1.0;" x1="173" x2="220" y1="1595.7012" y2="1595.7012"/><polygon fill="#666666" points="183,1591.7012,173,1595.7012,183,1599.7012,179,1595.7012" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="185" y="1562.6484">Continue normal</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="185" y="1577.959">operation</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="884.5" x="0" y="1619.3564"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="884.5" y1="1619.3564" y2="1619.3564"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="884.5" y1="1622.3564" y2="1622.3564"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="206" x="339.25" y="1608.7012"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="188" x="345.25" y="1625.2695">Normal Operation Resumed</text><path d="M5,1647.0117 L5,1794.0117 L535,1794.0117 L535,1657.0117 L525,1647.0117 L5,1647.0117 " fill="#90EE90" style="stroke:#181818;stroke-width:0.5;"/><path d="M525,1647.0117 L525,1657.0117 L535,1657.0117 L525,1647.0117 " fill="#90EE90" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="130" x="100" y="1664.5801">Recovery Complete</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="100" y="1679.8906">&#160;</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="270" x="100" y="1695.2012">- All previously stored transactions loaded</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="100" y="1710.5117">- Any locked transactions unlocked</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="227" x="100" y="1725.8223">- Service ready for new transactions</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="100" y="1741.1328">- No data loss occurred</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="100" y="1756.4434">&#160;</text><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="76" x="100" y="1771.7539">Key Insight</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="176" y="1771.7539">: The locked flag prevents spending</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="100" y="1787.0645">during the crash, then recovery unlocks them safely.</text><text fill="#333333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="154" x="0" y="1881.9629">Last Modified On: 9-Dev-2025</text><!--SRC=[fLVDRYGr4BxxAOgi49DH9a92GcYa82MpEykAP1Fb1u6KYwTTdR7YjaUsEqE3k77ao1NnRZm1Zq3P_UVkJ388MjhTwNRzVlLLbTSzIhtXbXUmujdZWpMb5WkZZ8Ktoy-NNosNp7KI0dDUAhyqsZSYNyGd4U7Mccrp-6Ly6FiCtc8kDSBAM87MGKwdN2b0XGLgxn9zUfM-WfyPm5cK7jgYh-CetyQ7_S8IAnb5Q8twlsReRoypkU7Q_pTJb8j2E5CcUuHJvx1OgGgkCJDFQAivtEbm8lK3t5gk7S-yDDh1QUxHmWtQ9vaXYJjFSJ2MHdDmKpcFnG5m1_NFuV7GPHIBdzelJ73FLzmX77pGv4rp1JVUMFw0jStwTo9sT_lzPVnS2uJN-3Rq-nrNadICZKBT6sCd9_3Hs8BSN6xGyf0ed24H0M5XkLl3oGbZdJpClXx6EwzTJtoFqo4B_pvnZwFK1c_1KfFC7Aw8VD9vIApSwqcf2oAdE6JQa2qh7zOUJDv106bnm8KmH60m7UIbBoc1LGIRj_vH2mYcs3WI2gNBa18gimoTOm9Vo6C8HwBfj-PgJKLPcAAGFebkSZZKwOf4tj2Vat4K4__ZDuJt4UHSEHmdtPSLO3fjAdR5_New7G5HHkwYeCyyyjNL-UIbYY05w7eagFnrcMyorDnA4-iTVOTUQ3XyrFk7D-SXfWKPKZ6MLd4wdOyRoZMTaWKFI4n_jxoyVaTQFHWPr_I7Hivhs946DHiDkFaWK-dQgaizSaqQgzB7g1rOB3X9rB2SU5jYK8Xz4_KJEEfqTx3yhpz-wne_ffDWD6JJ49zMXmf1P2OkYTsy3T4sTHiKPpHiWDDXEwTYgLwC-Ey_V_-rKxVDh7g9qSzQSsJiWvPUKj5-mhQeUrMKuUAkxk1qY4x6p1v60drsUQbhY08_8cwYj64cnrJA3NX3UGKtTBIn-2HDwGBhQaIJMU9URlra25qZ5t7xDNFdNWzCD79nMenIFG-pYr8PoEy5Q4dqfn6pJjNczpfR8n5PvYqTc39cqmitmQLAb3x0Cs_9Z7cF_W8z3pkZcJA7KQTlwXr9jHemaJfJfGZ8ro51hlX3x4eQCShtiH8X8RHNF0dF2ptoV9pyW4gPRQS7b2-jxJH9y6lkOSlRdazaG- -G9wZGTzCFLlKEgtkrbUneq7xOLwDJ8GBDQfk3ku2YchF6Pg0NOmCe1h8qg49yM6nyjRTO_K9eBCM2eUiMGmViy-NGeFdU8kecn-cqQwXkNSGGk8zigbTa6C0fUMkP6d8akycK2faaEoO1TJ-dsjNANY77ZXow339JR1Hw_AGv6A2ipHRu4vUAhrHRuN2XTHkACB0tp4vg7levZ1i9rb0vtHRwEHRxOkLLu_1Zc4bDj1fHe3XkJav764TWcxEDDNJv8dijiCUZ20E_zd5rGNThgMcvwNWxkDUclT2nL-uok-v_OTaMiPt_pLMWhLJ2j4LJ9s8R7SnYxgzFwBWk8g58MbUx2f6oRfPiDYwgM6UDst7XPg4USOWfunoOB2jjc1qnsc-nehtcGWhXxdAxndI-nNZ3_u4w_lGBoA-RmN8KVkg-udM4BdmjmF4SLNMSx1w5kQTGJRYLdNFQ6HT6o5oInqizXqyfK9mS236xkBYOLVGS7B9_0000]--></g></svg>