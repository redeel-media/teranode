<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1229px" preserveAspectRatio="none" style="width:1396px;height:1229px;background:#F0F8FF;" version="1.1" viewBox="0 0 1396 1229" width="1396px" zoomAndPan="magnify"><defs/><g><rect fill="#F0F8FF" height="1229" style="stroke:none;stroke-width:1.0;" width="1396" x="0" y="0"/><rect fill="#FFFFFF" height="914.8926" style="stroke:#181818;stroke-width:1.0;" width="10" x="271.5" y="141.1094"/><rect fill="#FFFFFF" height="826.9609" style="stroke:#181818;stroke-width:1.0;" width="10" x="276.5" y="207.7305"/><rect fill="none" height="741.3398" style="stroke:#000000;stroke-width:1.5;" width="1259" x="10" y="286.3516"/><rect fill="none" height="165.8633" style="stroke:#000000;stroke-width:1.5;" width="828" x="20" y="519.8359"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="689" x="30" y="573.457"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="1026.5" x="232.5" y="699.6992"/><rect fill="none" height="216.1055" style="stroke:#000000;stroke-width:1.5;" width="769.5" x="232.5" y="760.3203"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="193.5" x="30" y="1071.002"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="68" x2="68" y1="67.4883" y2="1147.623"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="276.5" x2="276.5" y1="67.4883" y2="1147.623"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="496.5" x2="496.5" y1="67.4883" y2="1147.623"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="666" x2="666" y1="67.4883" y2="1147.623"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="778" x2="778" y1="67.4883" y2="1147.623"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="952" x2="952" y1="67.4883" y2="1147.623"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1157" x2="1157" y1="67.4883" y2="1147.623"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1324" x2="1324" y1="67.4883" y2="1147.623"/><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="57" x="40" y="36"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="47" y="56.5352">Server</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="57" x="40" y="1146.623"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="47" y="1167.1582">Server</text><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="242.5" y="64.5352">Validator</text><ellipse cx="276.5" cy="35" fill="#DDDDDD" rx="12" ry="12" style="stroke:#666666;stroke-width:0.5;"/><line style="stroke:#666666;stroke-width:0.5;" x1="264.5" x2="288.5" y1="49" y2="49"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="242.5" y="1160.1582">Validator</text><ellipse cx="276.5" cy="1179.1113" fill="#DDDDDD" rx="12" ry="12" style="stroke:#666666;stroke-width:0.5;"/><line style="stroke:#666666;stroke-width:0.5;" x1="264.5" x2="288.5" y1="1193.1113" y2="1193.1113"/><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="94" x="449.5" y="36"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="456.5" y="56.5352">TxValidator</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="94" x="449.5" y="1146.623"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="456.5" y="1167.1582">TxValidator</text><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="624" y="64.5352">UTXO Store</text><path d="M648.5,15 C648.5,5 666.5,5 666.5,5 C666.5,5 684.5,5 684.5,15 L684.5,41 C684.5,51 666.5,51 666.5,51 C666.5,51 648.5,51 648.5,41 L648.5,15 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M648.5,15 C648.5,25 666.5,25 666.5,25 C666.5,25 684.5,25 684.5,15 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="624" y="1160.1582">UTXO Store</text><path d="M648.5,1173.1113 C648.5,1163.1113 666.5,1163.1113 666.5,1163.1113 C666.5,1163.1113 684.5,1163.1113 684.5,1173.1113 L684.5,1199.1113 C684.5,1209.1113 666.5,1209.1113 666.5,1209.1113 C666.5,1209.1113 648.5,1209.1113 648.5,1199.1113 L648.5,1173.1113 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M648.5,1173.1113 C648.5,1183.1113 666.5,1183.1113 666.5,1183.1113 C666.5,1183.1113 684.5,1183.1113 684.5,1173.1113 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="119" x="719" y="36"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="726" y="56.5352">Block Assembly</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="119" x="719" y="1146.623"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="726" y="1167.1582">Block Assembly</text><path d="M853,41 L1051,41 C1056,41 1056,54.2441 1056,54.2441 C1056,54.2441 1056,67.4883 1051,67.4883 L853,67.4883 C848,67.4883 848,54.2441 848,54.2441 C848,54.2441 848,41 853,41 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1051,41 C1046,41 1046,54.2441 1046,54.2441 C1046,67.4883 1051,67.4883 1051,67.4883 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188" x="853" y="59.5352">Rejected Tx Kafka Producer</text><path d="M853,1146.623 L1051,1146.623 C1056,1146.623 1056,1159.8672 1056,1159.8672 C1056,1159.8672 1056,1173.1113 1051,1173.1113 L853,1173.1113 C848,1173.1113 848,1159.8672 848,1159.8672 C848,1159.8672 848,1146.623 853,1146.623 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1051,1146.623 C1046,1146.623 1046,1159.8672 1046,1159.8672 C1046,1173.1113 1051,1173.1113 1051,1173.1113 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188" x="853" y="1165.1582">Rejected Tx Kafka Producer</text><path d="M1071,41 L1244,41 C1249,41 1249,54.2441 1249,54.2441 C1249,54.2441 1249,67.4883 1244,67.4883 L1071,67.4883 C1066,67.4883 1066,54.2441 1066,54.2441 C1066,54.2441 1066,41 1071,41 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1244,41 C1239,41 1239,54.2441 1239,54.2441 C1239,67.4883 1244,67.4883 1244,67.4883 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="1071" y="59.5352">Tx Meta Kafka Producer</text><path d="M1071,1146.623 L1244,1146.623 C1249,1146.623 1249,1159.8672 1249,1159.8672 C1249,1159.8672 1249,1173.1113 1244,1173.1113 L1071,1173.1113 C1066,1173.1113 1066,1159.8672 1066,1159.8672 C1066,1159.8672 1066,1146.623 1071,1146.623 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1244,1146.623 C1239,1146.623 1239,1159.8672 1239,1159.8672 C1239,1173.1113 1244,1173.1113 1244,1173.1113 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="1071" y="1165.1582">Tx Meta Kafka Producer</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="131" x="1259" y="36"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1266" y="56.5352">Blockchain Client</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="131" x="1259" y="1146.623"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1266" y="1167.1582">Blockchain Client</text><rect fill="#FFFFFF" height="914.8926" style="stroke:#181818;stroke-width:1.0;" width="10" x="271.5" y="141.1094"/><rect fill="#FFFFFF" height="826.9609" style="stroke:#181818;stroke-width:1.0;" width="10" x="276.5" y="207.7305"/><line style="stroke:#666666;stroke-width:1.0;" x1="68.5" x2="110.5" y1="98.7988" y2="98.7988"/><line style="stroke:#666666;stroke-width:1.0;" x1="110.5" x2="110.5" y1="98.7988" y2="111.7988"/><line style="stroke:#666666;stroke-width:1.0;" x1="69.5" x2="110.5" y1="111.7988" y2="111.7988"/><polygon fill="#666666" points="79.5,107.7988,69.5,111.7988,79.5,115.7988,75.5,111.7988" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="75.5" y="94.0566">ValidateTransaction()</text><polygon fill="#666666" points="259.5,137.1094,269.5,141.1094,259.5,145.1094,263.5,141.1094" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="68.5" x2="265.5" y1="141.1094" y2="141.1094"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="75.5" y="136.3672">Validate(ctx, tx, blockHeight)</text><polygon fill="#666666" points="1312.5,166.4199,1322.5,170.4199,1312.5,174.4199,1316.5,170.4199" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="281.5" x2="1318.5" y1="170.4199" y2="170.4199"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="288.5" y="165.6777">GetFSMCurrentState()</text><line style="stroke:#666666;stroke-width:1.0;" x1="281.5" x2="328.5" y1="194.7305" y2="194.7305"/><line style="stroke:#666666;stroke-width:1.0;" x1="328.5" x2="328.5" y1="194.7305" y2="207.7305"/><line style="stroke:#666666;stroke-width:1.0;" x1="287.5" x2="328.5" y1="207.7305" y2="207.7305"/><polygon fill="#666666" points="297.5,203.7305,287.5,207.7305,297.5,211.7305,293.5,207.7305" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="293.5" y="189.9883">validateInternal()</text><polygon fill="#666666" points="484.5,238.041,494.5,242.041,484.5,246.041,488.5,242.041" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="286.5" x2="490.5" y1="242.041" y2="242.041"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="293.5" y="237.2988">validateTransaction()</text><polygon fill="#666666" points="297.5,267.3516,287.5,271.3516,297.5,275.3516,293.5,271.3516" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="291.5" x2="495.5" y1="271.3516" y2="271.3516"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="303.5" y="266.6094">Return result</text><path d="M10,286.3516 L72,286.3516 L72,293.6621 L62,303.6621 L10,303.6621 L10,286.3516 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="741.3398" style="stroke:#000000;stroke-width:1.5;" width="1259" x="10" y="286.3516"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="299.9199">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="82" x="87" y="298.9863">[if TX is valid]</text><line style="stroke:#666666;stroke-width:1.0;" x1="286.5" x2="328.5" y1="324.9727" y2="324.9727"/><line style="stroke:#666666;stroke-width:1.0;" x1="328.5" x2="328.5" y1="324.9727" y2="337.9727"/><line style="stroke:#666666;stroke-width:1.0;" x1="287.5" x2="328.5" y1="337.9727" y2="337.9727"/><polygon fill="#666666" points="297.5,333.9727,287.5,337.9727,297.5,341.9727,293.5,337.9727" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="293.5" y="320.2305">spendUtxos()</text><polygon fill="#666666" points="654.5,363.2832,664.5,367.2832,654.5,371.2832,658.5,367.2832" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="286.5" x2="660.5" y1="367.2832" y2="367.2832"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="253" x="293.5" y="362.541">Spend() # Mark TX input UTXOs as spent</text><line style="stroke:#666666;stroke-width:1.0;" x1="286.5" x2="328.5" y1="396.5938" y2="396.5938"/><line style="stroke:#666666;stroke-width:1.0;" x1="328.5" x2="328.5" y1="396.5938" y2="409.5938"/><line style="stroke:#666666;stroke-width:1.0;" x1="287.5" x2="328.5" y1="409.5938" y2="409.5938"/><polygon fill="#666666" points="297.5,405.5938,287.5,409.5938,297.5,413.5938,293.5,409.5938" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="293.5" y="391.8516">storeTxInUtxoMap()</text><polygon fill="#666666" points="654.5,450.2148,664.5,454.2148,654.5,458.2148,658.5,454.2148" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="286.5" x2="660.5" y1="454.2148" y2="454.2148"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="293.5" y="434.1621">Create(locked=true)</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="293.5" y="449.4727">1.</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="309.5" y="449.4727">Persist new UTXOs from TX as locked</text><path d="M671,467.2148 L671,507.2148 L922,507.2148 L922,477.2148 L912,467.2148 L671,467.2148 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M912,467.2148 L912,477.2148 L922,477.2148 L912,467.2148 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="677" y="484.7832">UTXOs are initially created as locked</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="677" y="500.0938">(first phase of two-phase commit)</text><path d="M20,519.8359 L82,519.8359 L82,527.1465 L72,537.1465 L20,537.1465 L20,519.8359 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="165.8633" style="stroke:#000000;stroke-width:1.5;" width="828" x="20" y="519.8359"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="533.4043">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="158" x="97" y="532.4707">[if !blockAssemblyDisabled]</text><polygon fill="#666666" points="766.5,554.457,776.5,558.457,766.5,562.457,770.5,558.457" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="286.5" x2="772.5" y1="558.457" y2="558.457"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="293.5" y="553.7148">Store()</text><path d="M30,573.457 L92,573.457 L92,580.7676 L82,590.7676 L30,590.7676 L30,573.457 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="689" x="30" y="573.457"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="45" y="587.0254">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="192" x="107" y="586.0918">[if error in block assembler store]</text><polygon fill="#666666" points="654.5,608.0781,664.5,612.0781,654.5,616.0781,658.5,612.0781" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="286.5" x2="660.5" y1="612.0781" y2="612.0781"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="293.5" y="607.3359">Delete() # reverseTxMetaStore</text><polygon fill="#666666" points="654.5,637.3887,664.5,641.3887,654.5,645.3887,658.5,641.3887" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="286.5" x2="660.5" y1="641.3887" y2="641.3887"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="293.5" y="636.6465">Unspend() # reverseSpends</text><polygon fill="#666666" points="79.5,666.6992,69.5,670.6992,79.5,674.6992,75.5,670.6992" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="73.5" x2="275.5" y1="670.6992" y2="670.6992"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="85.5" y="665.957">Return error</text><path d="M232.5,699.6992 L294.5,699.6992 L294.5,707.0098 L284.5,717.0098 L232.5,717.0098 L232.5,699.6992 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="1026.5" x="232.5" y="699.6992"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="247.5" y="713.2676">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="191" x="309.5" y="712.334">[if Tx Meta Kafka Producer exists]</text><polygon fill="#666666" points="1145.5,734.3203,1155.5,738.3203,1145.5,742.3203,1149.5,738.3203" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="286.5" x2="1151.5" y1="738.3203" y2="738.3203"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="293.5" y="733.5781">Publish tx meta</text><path d="M232.5,760.3203 L294.5,760.3203 L294.5,767.6309 L284.5,777.6309 L232.5,777.6309 L232.5,760.3203 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="216.1055" style="stroke:#000000;stroke-width:1.5;" width="769.5" x="232.5" y="760.3203"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="247.5" y="773.8887">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="158" x="309.5" y="772.9551">[if !blockAssemblyDisabled]</text><line style="stroke:#666666;stroke-width:1.0;" x1="286.5" x2="328.5" y1="798.9414" y2="798.9414"/><line style="stroke:#666666;stroke-width:1.0;" x1="328.5" x2="328.5" y1="798.9414" y2="811.9414"/><line style="stroke:#666666;stroke-width:1.0;" x1="287.5" x2="328.5" y1="811.9414" y2="811.9414"/><polygon fill="#666666" points="297.5,807.9414,287.5,811.9414,297.5,815.9414,293.5,811.9414" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="293.5" y="794.1992">twoPhaseCommitTransaction()</text><polygon fill="#666666" points="654.5,867.873,664.5,871.873,654.5,875.873,658.5,871.873" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="286.5" x2="660.5" y1="871.873" y2="871.873"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="293.5" y="836.5098">SetLocked(txHash, false)</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="297.5" y="851.8203"># Unlock the UTXOs</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="352" x="297.5" y="867.1309"># after successful Block Assembly and Kafka publishing</text><path d="M671,884.873 L671,970.873 L992,970.873 L992,894.873 L982,884.873 L671,884.873 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M982,884.873 L982,894.873 L992,894.873 L982,884.873 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="677" y="902.4414">Second phase of two-phase commit:</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="677" y="917.752">UTXOs are now marked as spendable.</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="300" x="677" y="933.0625">This happens AFTER Block Assembly and Kafka.</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="677" y="948.373">If this fails, it's logged but not fatal</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="677" y="963.6836">(transaction will unlock when mined).</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1269" y1="984.4258" y2="984.4258"/><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="93" x="15" y="995.0605">[if TX is invalid]</text><polygon fill="#666666" points="940,1015.6914,950,1019.6914,940,1023.6914,944,1019.6914" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="286.5" x2="946" y1="1019.6914" y2="1019.6914"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="293.5" y="1014.9492">Publish rejected TX</text><polygon fill="#666666" points="79.5,1052.002,69.5,1056.002,79.5,1060.002,75.5,1056.002" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="73.5" x2="275.5" y1="1056.002" y2="1056.002"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="85.5" y="1051.2598">Return validation result</text><path d="M30,1071.002 L92,1071.002 L92,1078.3125 L82,1088.3125 L30,1088.3125 L30,1071.002 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="193.5" x="30" y="1071.002"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="45" y="1084.5703">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="93" x="107" y="1083.6367">[if TX is invalid]</text><line style="stroke:#666666;stroke-width:1.0;" x1="68.5" x2="110.5" y1="1109.623" y2="1109.623"/><line style="stroke:#666666;stroke-width:1.0;" x1="110.5" x2="110.5" y1="1109.623" y2="1122.623"/><line style="stroke:#666666;stroke-width:1.0;" x1="69.5" x2="110.5" y1="1122.623" y2="1122.623"/><polygon fill="#666666" points="79.5,1118.623,69.5,1122.623,79.5,1126.623,75.5,1122.623" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="75.5" y="1104.8809">Return error response</text><text fill="#333333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="154" x="0" y="1219.7793">Last Modified On: 9-Dev-2025</text><!--SRC=[fLPjRzis4FxENt5pCDG6acB0W64mi06jKw_1QZI8dI4VzeMIJXPhYjH8AdPGxB_lICeovTXDrnAmOP9tpxqzTxJT2DLmmsl8UBvP6zsgOgQbDd0n_sd-wtpER2zHOCbRwUPQkKxavx0I4MwCtdQNluJ5s2kunb8eX4oR0es5acwvb80IQrJE9lgq5Uu9FZE0jq5wY4MdnrvUXyN-PGbAJXuQBRyNXhwTo4N3bVisACPIYD4IpIEQ4N0ByIVhmXtznQKekDFnijyDrLUxeLYoP_JDCsuHHlUhXu-mf3CCGduRTaEijrBd6tXZBTQPV0gIuMX_mlvfiIMqE_o4kSE2ZC6VlDnmk3MwQFCkZFrrkDhhaEW27JyblzhvcoZzt9-yuaB1J0fAoy6bS1eF6OjvWwlVkmnEzyd2bU7Ayjm9hSQJHAxFqK5qdBlT9VXFvWsyHx6kt8HvvKUwJlBF-fyUwjYTAVo1RhvSp5fZQBjq7dior4dCFtRcRvH3exWSVuN9fCO7W66eYSYHmJjqhL5Wq5BNCiQb0r72wW64ZLZ4Ne1pshP1LToxdRPav9bWpwifBBtWU08NiE1c4_1LqxeWOdqPFHBP_w8n3xNQtIXlSC6R5qpE3FfS-tfWyPipBKxWRtK1jpHUX7MWSDkPBusklKlaHfGEk4fJpeqlE-WowH48gtFS80KYdA1HzGHvi5WSuG2CIs78O5FvvYCijzLNSPFhkXOkna492ZPZ4hf2_92b7NSjBCzaZtiK-w0vfx6_knmbY4ZJrv3JaTVaQv2dFh19T2VGaynUqr3sBAPg6gGMiXXxTldL2FVAzeJe8093x3djf9axneOuUd7ItITnaB_JSmPmHmomfzEOp9yftBQP5BQYGG0rdPwqyNzgbD2PM73hIJ0B71ZswqlvMwBx41WsThltt5QNK79fYU34S4hflGgrTHLsF0sdl7I-p6sUexLbAs4uu84J0MEUcXYrKElUaoztWrzBf2UrEC_oQI9xw1wbjr3JI8Xj4rZXq_Sw4LvLD8igtj2TXJVprRkxivwdQZVaWjSikP3s4eHxvTjolIPB6KqU2eYk79U9ojWTgW1RGNy_sfZ9ROKAQlf_KanUfvoB3TkJ0ga6X_4fr9a1EdWH3nmp_Jlwm09SWI_E_gEcwAQ_Tx-RwASn1cC-zVFvsvcscmTjjB8O_PDOKWwrzhJwm6d2BNGXIa4HV5HJ-34yewEYk5ei5bTFj4OJzXy0]--></g></svg>